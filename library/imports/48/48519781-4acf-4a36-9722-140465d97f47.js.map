{"version":3,"sources":["assets\\Script\\Other\\SoundMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GameData from \"./GameData\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class SoundMgr extends cc.Component {\n\n    sound_path: string = 'music/';\n    sounds: { [key: number]: any } = {};\n    music_enabled: boolean = true;\n    audio_enabled: boolean = true;\n    music: string = 'BGM';\n    protected static _instance: SoundMgr;\n    public static getInstance(): SoundMgr {\n        if (!this._instance) {\n            this._instance = new SoundMgr();\n            this._instance._init();\n        }\n        return this._instance;\n    }\n\n    private _init() {\n        this.setBgmVolume(this.getBgmVolume())\n        this.setAudioVolume(this.getAudioVolume())\n    }\n\n    addSound(key: string, clip: cc.AudioClip) {\n        this.sounds[key] = clip;\n    }\n\n    playFx(fxName: string, isloop: boolean = false) {\n        if (!this.audio_enabled) return;\n        if (this.sounds[fxName]) cc.audioEngine.playEffect(this.sounds[fxName], isloop);\n    }\n\n    playMusic(musicName: string) {\n        if (!this.music_enabled) return;\n        if (this.sounds[musicName]) cc.audioEngine.playMusic(this.sounds[musicName], true);\n    }\n\n    setBgmVolume(num: number) {\n        cc.audioEngine.setMusicVolume(num)\n        GameData.saveLocalData(\"MusicVolume\", num)\n    }\n\n    setAudioVolume(num: number) {\n        cc.audioEngine.setEffectsVolume(num)\n        GameData.saveLocalData(\"EffectsVolume\", num)\n    }\n\n    getBgmVolume() {\n        let num = GameData.getLocalData(\"MusicVolume\")\n        if (num == 0) {\n            return 0\n        }\n        return num ? num : 1\n    }\n\n    getAudioVolume() {\n        let num = GameData.getLocalData(\"EffectsVolume\")\n        if (num == 0) {\n            return 0\n        }\n        return num ? num : 1\n    }\n\n    stopMusic() {\n        cc.audioEngine.stopMusic();\n    }\n\n    stopAllMusic() {\n        cc.audioEngine.stopAll();\n    }\n\n    setMusic(enabled: boolean) {\n        this.music_enabled = enabled;\n        if (!enabled) {\n            cc.audioEngine.stopMusic();\n        }\n    }\n    setAudio(enabled: boolean) {\n        this.audio_enabled = enabled;\n    }\n\n    setEnabled(enabled: boolean) {\n        this.music_enabled = enabled;\n        if (this.music_enabled) {\n            this.playMusic(this.music);\n        }\n        else {\n            cc.audioEngine.stopAll();\n        }\n    }\n\n    getEnable() {\n        return this.music_enabled;\n    }\n\n\n    getMusicName() {\n        return this.music\n    }\n\n\n}\n"]}